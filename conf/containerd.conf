
<source>
      @type tail
      @id in_tail_container_logs
      path /var/log/containers/*.log
      path_key tailed_path
      pos_file /var/log/fluentd-containers.log.pos
      tag containerd.source
      exclude_path ["/var/log/containers/content-fluentd*"]
      read_from_head true
      <parse>
        @type regexp
        expression /^(?<time>.+) (?<stream>stdout|stderr)( (?<logtag>.))? (?<log>.*)$/
        time_format %Y-%m-%dT%H:%M:%S.%NZ
      </parse>
</source>

<filter containerd.source>
   @type       record_transformer
   enable_ruby true
   <record>
      POD_NAME          ${record["tailed_path"]}
   </record>
</filter>